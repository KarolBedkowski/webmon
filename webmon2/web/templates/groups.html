{% extends 'base.html' %}
{% import '_render_source.html' as rs %}
<!DOCTYPE html>
<html>
  <body>

{% block header %}
  <h1>{% block title %}Groups{% endblock %}</h1>
  <nav>
	  <a href="{{ url_for("root.sources_refresh")}}">Refresh all</a>
	  <a href="{{ url_for('group.group_edit') }}">New</a>
  </nav>
{% endblock %}

{% block content %}
	{% for group in groups %}
		<article>
			<header>
				<h4><a href="{{ url_for('group.group_entries', group_id=group.id) }}">{{ group.name }}</a>
					{% if group.unread %}({{ group.unread }}){% endif %}
				</h4>
				<nav>
					<a href="{{ url_for('group.refresh_group', group_id=group.id, back=request.url )}}">↺ Refresh</a>
					| <a href="{{ url_for('group.group_mark_read', group_id=group.id, back=request.url )}}">✔︎ Mark read</a>
					| <a href="{{ url_for('group.group_sources', group_id=group.id, back=request.url )}}">Sources ({{ group.sources_count }})</a>
					| <a href="{{ url_for('group.group_edit', group_id=group.id, back=request.url )}}">✎ Edit</a>
				</nav>
				{% if group.feed and group.feed != 'off' %}
				<p>Feed: <a href="{{ url_for("atom.group", key=group.feed) | absolute_url }}">
					{{ url_for("atom.group", key=group.feed) | absolute_url }}</p>
				{% endif %}
			</header>
		</article>
	{% endfor %}
{% endblock %}

  </body>
</html>
