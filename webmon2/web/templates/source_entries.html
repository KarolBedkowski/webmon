{% extends 'base.html' %}
{% import '_render_entry.html' as re %}
{% import '_render_nav.html' as rn %}
<!DOCTYPE html>
<html>
  <body>

{% block header %}
	<h1>{% block title %}Entries in {{ source.name }} ({{ total_entries }}){% endblock %}</h1>
	<nav>
		{% if max_id %}
		<a href="{{ url_for('source.source_mark_read', source_id=source.id, min_id=min_id, max_id=max_id) }}">✔ Mark read</a>
		{% endif %}
		<a href="{{ url_for('source.source_refresh', source_id=source.id, back=request.url) }}">↺ Refresh</a>
		<a href="{{ url_for('source.source_edit', source_id=source.id, back=request.url) }}">✎ Edit</a>
		{% if showed == 'all' %}
		<a href="{{ url_for('source.source_entries', source_id=source.id) }}">⊙ Show unread only</a>
		{% else %}
		<a href="{{ url_for('source.source_entries', source_id=source.id, mode='all') }}">⊛ Show all</a>
		{% endif %}
		{% if showed == 'all' %}
			{{ rn.render_entres_nav(page, last_page,
				url_for('source.source_entries', source_id=source.id, page=prev_page, mode='all'),
				url_for('source.source_entries', source_id=source.id, page=next_page, mode='all'),
				url_for('source.source_entries', source_id=source.id, page=0, mode='all'),
				url_for('source.source_entries', source_id=source.id, page=last_page, mode='all')
			) }}
		{% endif %}
	</nav>
{% endblock %}

{% block content %}
	{% if not entries %}
		<p>No entries...</p>
	{% endif %}
	{% for entry in entries %}
		{{ re.render_entry(entry, 'summary') }}
	{% endfor %}
{% endblock %}

{% block footer %}
	<nav>
		{% if max_id %}
		<a href="{{ url_for('source.source_mark_read', source_id=source.id, min_id=min_id, max_id=max_id) }}">✔ Mark read</a>
		{% endif %}
		{% if showed == 'all' %}
			{{ rn.render_entres_nav(page, last_page,
				url_for('source.source_entries', source_id=source.id, page=prev_page, mode='all'),
				url_for('source.source_entries', source_id=source.id, page=next_page, mode='all'),
				url_for('source.source_entries', source_id=source.id, page=0, mode='all'),
				url_for('source.source_entries', source_id=source.id, page=last_page, mode='all')
			) }}
		{% endif %}
	</nav>
{% endblock %}

  </body>
</html>
