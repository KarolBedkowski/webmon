{% extends 'base.html' %}
{% import '_render_field.html' as rf %}
<!DOCTYPE html>
<html>
  <body>

{% block header %}
  <h1>{% block title %}Group{% endblock %}</h1>
<style>
	input,textarea,select {width: 75%;}
	label {width: 20%; display: inline-block; vertical-align: top;}
</style>
{% endblock %}

{% block content %}
	{% if errors %}
		<p class="error">
			<b>Validation errors:</b>
			{% for field, err in errors.items() %}
			<br/>{{ err }}
			{% endfor %}
		<p>
	{% endif %}
	<form method="POST">
		<input type="hidden" name="_csrf_token" value="{{ session['_csrf_token'] }}"/>
		<p>
			<label for="source-name">Name</label>
			<input type="text" name="name" id="source-name" required="required" value="{{ group.name or '' }}" />
		</p>
		<p>
			<label for="source-feed">Feed enabled</label>
			<input type="checkbox" name="feed_enabled" id="source-feed" {% if group.feed_enabled %}checked="checked"{% endif %} />
		</p>
		<p>
			<label for="source-mail-report">Send mail reports</label>
			{{ rf.render_select("mail_report", "source-mail-report", [(0, 'no'), (1, 'as configured in source'), (2, 'yes')], group.mail_report) }}
		</p>
		<p class="row">
			{% if group.id %}
				<span class="left"><a href="{{ url_for('group.group_delete', group_id=group_id, delete_self=1) }}" data-req-confirm="yes" data-question="Realy delete group?">âš  Delete</a></span>
			{% endif %}
			<span class="right">
				{% if request.args.get('back') %}
					<a href="{{ request.args['back'] }}" >Back</a>
				{% else %}
					<a href="#" data-action="hist-back">Back</a>
				{% endif %}
				<button type="submit">Save</button>
			</span>
		</p>
	</form>
{% endblock %}

  </body>
</html>
